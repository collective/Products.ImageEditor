<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="uwosh.ImageEditor">
<metal:js fill-slot="javascript_head_slot">

	<script type="text/javascript" 
			tal:attributes="src string:${context/++resource++ImageEditor.resources}/jquery.ui-1.5.2/jquery-1.2.6.js">
	</script>
	<script type="text/javascript" 
			tal:attributes="src string:${context/++resource++ImageEditor.resources}/jquery-ui-personalized-1.6b.min.js">
	</script>
	<script type="text/javascript" 
			tal:attributes="src string:${context/++resource++ImageEditor.resources}/imgareaselect-0.4.2/jquery.imgareaselect-0.4.2.min.js">
	</script>
	<script type="text/javascript" 
			tal:attributes="src string:${context/++resource++ImageEditor.resources}/imageeditor.js">
	</script>
</metal:js>
<metal:css fill-slot="css_slot">
<link rel="stylesheet" 
	tal:attributes="href string:${context/++resource++ImageEditor.resources}/jquery.ui-1.5.2/themes/default/ui.all.css"
	type="text/css" media="screen" />
<link 	rel="stylesheet" 
	tal:attributes="href string:${context/++resource++ImageEditor.resources}/style.css" 	
	media="screen" 
	charset="utf-8" />
</metal:css>
<body>
<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">		
		<div 	id="imageEditor" 
				tal:define="width python: here.getSize()[0];
							height python: here.getSize()[1];">
			<input type="hidden" class="canCompress" tal:attributes="value view/canCompress">
			
			<div id="manageButtons">
				<input id="save" class="disabled context" disabled="true" type="button" value="save" />
				<input id="cancel" class="disabled standalone" disabled="true" type="button" value="cancel" />
				<div id="slider" class="imageeditor-slider">
					<p>100%</p>
					<div class="ui-slider-handle"></div>
				</div>
				
				<div class="useZoom">
					<input id="useZoom" type="checkbox" /><p>use zoomed view for crop/resize</p>
				</div>
			</div>
			<div id="actionButtons">
				<div id="menuHandle"></div>
				<input 	id="serverResizeSaveButton" 
						type="button" 
						value="nothing" 
						style="display:none"
						tal:attributes="class string:kssattr-width-${width} kssattr-height-${height}"/>
				<input 	id="serverCropSaveButton" 
						type="button" 
						value="nothing" 
						style="display:none"
						tal:attributes="class string:kssattr-tlx-200 kssattr-tly-200 kssattr-brx-500 kssattr-bry-500"/>
				<input 	id="cropAndResize" 
						type="button" 
						value="nothing" 
						style="display:none"
						tal:attributes="class string:kssattr-tlx-200 kssattr-tly-200 kssattr-brx-500 kssattr-bry-500 kssattr-width-${width} kssattr-height-${height}"/>
						
						
						
				<input id="compression" type="button" value="quality" />
				<div id="compressiondialog" class="imageeditor-dialog" style="display:none">
					<p>Choose the level of compression</p>
					<div id="compressionslider" class="imageeditor-slider">
						<p>75%</p>
						<div class="ui-slider-handle"></div>
					</div><br /><br />
					<input 	id="performCompression" 
							type="button" 
							value="Apply"
							tal:attributes="class string:kssattr-amount-0" />
				</div>
				<input id="flipOnVerticalAxis" type="button" value="flip vertically" />
				<input id="flipOnHorizontalAxis" type="button" value="flip horizontally" />
				<input id="rotate-left" type="button" value="rotate left" />
				<input id="rotate-right" type="button" value="rotate right" />
				
				<input id="blur" type="button" value="blur" />
				<div id="blurdialog" class="imageeditor-dialog" style="display:none">
					<p>Choose the level to blur to...</p>
					<div id="blurslider" class="imageeditor-slider">
						<p>1</p>
						<div class="ui-slider-handle"></div>
					</div><br /><br />
					<input 	id="performBlur" 
							type="button" 
							value="Apply" 
							tal:attributes="class string:kssattr-amount-0"/>
				</div>				
				
				<input id="brightness" type="button" value="brightness" />
				<div id="brightnessdialog" class="imageeditor-dialog" style="display:none">
					<p>Choose the level of brightness</p>
					<div id="brightnessslider" class="imageeditor-slider">
						<p>50%</p>
						<div class="ui-slider-handle"></div>
					</div><br /><br />
					<input 	id="performBrightness" 
							type="button" 
							value="Apply"
							tal:attributes="class string:kssattr-amount-0" />
				</div>
				
				<input id="contrast" type="button" value="contrast" />
				<div id="contrastdialog" class="imageeditor-dialog" style="display:none">
					<p>Choose the level of contrast</p>
					<div id="contrastslider" class="imageeditor-slider">
						<p>50%</p>
						<div class="ui-slider-handle"></div>
					</div><br /><br />
					<input 	id="performContrast" 
							type="button" 
							value="Apply"
							tal:attributes="class string:kssattr-amount-0" />
				</div>
				
				<input id="sharpen" type="button" value="sharpen" />
				<div id="sharpendialog" class="imageeditor-dialog" style="display:none">
					<p>Choose the level of sharpening</p>
					<div id="sharpenslider" class="imageeditor-slider">
						<p>1.0</p>
						<div class="ui-slider-handle"></div>
					</div><br /><br />
					<input 	id="performSharpen" 
							type="button" 
							value="Apply"
							tal:attributes="class string:kssattr-amount-0" />
				</div>
				
				<div id="cropAndResizeButtonContainer">
					<input id="resize" type="button" value="resize" />
					<input id="crop" type="button" value="crop" />
					<input id="apply" class="disabled" type="button" value="apply" />
				</div>
				
				<div id="undoRedoContainer">
					<input id="undo" class="disabled" disabled="true" type="button" value="undo" />
					<input id="redo" class="disabled" disabled="true" type="button" value="redo" />
				</div>
				<p class="discreet" style="font-size:10px; text-align:center; margin: auto">
					<span id="imageSize" tal:content="view/getSize" /> 
					<span id="imagePixels">0 x 0</span>
				</p>
			</div>
			<div id="imageContainer">
				<img id="sourceImage" tal:attributes="src view/image_url" />
			</div>
		</div>
    </tal:main-macro>
</metal:main>
</body>
</html>

